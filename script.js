const truthQuestions = [
      "What's the naughtiest thought you've had about me that you haven't told me?",
    "What's one thing you've always wanted to try in bed but haven't?",
    "What's your biggest sexual fantasy involving me?",
    "Where's the most unexpected place you've imagined us getting intimate?",
    "What's your favorite part of my body to kiss?",
    "What's a secret turn-on you have that you think I don't know about?",
    "What's the most adventurous thing you'd be willing to do with me in the bedroom?",
    "What's one sexual experience from your past that taught you something new?",
    "What's a specific fantasy scenario you'd like to act out with me?",
    "What's one thing I do that drives you absolutely wild?",
    "What's your favorite non-sexual way I show you affection?",
    "What's the most daring thing you've ever done in a public place?",
    "What's a hidden desire you have that you've been hesitant to share?",
    "What's your go-to move to get me in the mood?",
    "What's the sexiest outfit you've ever seen me in?",
    "What's one thing you wish we did more often in bed?",
    "What's your most embarrassing sexual moment?",
    "What's the most surprising thing you've learned about my sexuality?",
    "If you could change one thing about our sex life, what would it be?",
    "What's a sexual boundary you have that's important to you?",
    "What's the sexiest dream you've ever had about me?",
    "What's one specific kink or fetish you're curious about exploring with me?",
    "What's your favorite memory of us being intimate?",
    "What's the longest you've gone without sex and how did you feel?",
    "What's a scent that really turns you on?",
    "What's the most daring place you've ever had sex?",
    "What's one thing you find incredibly sexy about my personality?",
    "What's the quickest you've ever gotten turned on by me?",
    "What's one habit I have that you find endearing, even if it's a bit quirky?",
    "What's one thing you'd like to try with me that's outside our usual routine?",
    "What's the most intense orgasm you've ever had with me?",
    "What's one specific fantasy involving a prop or toy you'd like to use?",
    "What's a sexual position you've always wanted to try?",
    "What's the sexiest compliment someone has ever given you?",
    "What's one thing you secretly hope I'll do to you tonight?",
    "What's a misconception people have about your sex life?",
    "What's the most romantic thing I've ever done for you?",
    "What's one thing you find irresistible about my touch?",
    "What's a sexual turn-off for you?",
    "What's the most surprising place you've felt turned on?",
    "What's one sexual challenge you'd like us to accomplish together?",
    "What's a specific scenario that would make you instantly turned on?",
    "What's your favorite sexual movie or scene?",
    "What's one thing you appreciate most about our sexual compatibility?",
    "What's the most unusual place you've ever thought about having sex?",
    "What's one thing you're most proud of in our relationship?",
    "What's your favorite non-sexual way to connect with me?",
    "What's one physical feature of mine you find most attractive?",
    "What's the wildest thing you've ever done in the heat of the moment?",
    "What's one thing you're grateful for in our intimate life?",
    "What's your favorite type of foreplay?",
    "What's one thing you'd like to teach me about your desires?",
    "What's a specific fantasy involving multiple partners (even if just in theory)?",
    "What's one thing you've learned about yourself through our sexual experiences?",
    "What's your most memorable \"first time\" with me?",
    "What's one specific scenario where you'd want to be dominated?",
    "What's one thing that always makes you laugh, even in a serious moment?",
    "What's your favorite place to be touched?",
    "What's one thing you find challenging about our sex life?",
    "What's the most scandalous rumor you've ever heard about someone?",
    "What's one thing you'd like to re-create from a romantic movie?",
    "What's your biggest fear related to intimacy?",
    "What's a specific fantasy involving a role-play scenario?",
    "What's one thing you'd like to keep private about our sex life from others?",
    "What's the most confident you've ever felt about your body?",
    "What's one specific sound that turns you on?",
    "What's the sexiest piece of clothing you own?",
    "What's one thing you miss from when we first started dating?",
    "What's a specific fantasy involving an outdoor location?",
    "What's the most important quality you look for in a lover?",
    "What's one thing you'd like to improve in our communication about sex?",
    "What's a specific fantasy involving a specific time of day or night?",
    "What's one thing you've always wanted to ask me about my past?",
    "What's the most adventurous thing you've eaten?",
    "What's one specific fantasy involving a specific type of music?",
    "What's your favorite way to relax after an intense intimate session?",
    "What's one thing you admire about my strength?",
    "What's a specific fantasy involving a specific temperature?",
    "What's the most spontaneous thing you've ever done?",
    "What's one thing you'd like to explore about your own sexuality?",
    "What's a specific fantasy involving a specific prop you don't own yet?",
    "What's the sexiest thing about you that you think I don't notice?",
    "What's one thing you'd like to discover about my past sexual experiences?",
    "What's a specific fantasy involving a public but secluded setting?",
    "What's the most playful thing I've ever done to get your attention?",
    "What's one specific fantasy involving a specific type of clothing or lack thereof?",
    "What's your favorite non-sexual way I make you feel loved?",
    "What's one specific fantasy involving a specific type of weather?",
    "What's the most surprising turn-on you've discovered about yourself?",
    "What's one specific fantasy involving a specific time period?",
    "What's one thing you'd like to try that's a little bit taboo?",
    "What's your favorite position when you're feeling lazy but still want to be intimate?",
    "What's one specific fantasy involving a particular food or drink?",
    "What's the most romantic gift you've ever received?",
    "What's one specific fantasy involving a specific type of transportation?",
    "What's one thing you'd like to confess to me about your desires?",
    "What's your favorite way to be teased?",
    "What's one specific fantasy involving a specific type of art or performance?",
    "What's the most daring thing you've done to make someone laugh?",
    "What's one specific fantasy involving a specific historical event or setting?",
    // ... add all 100 truth questions here
];

const dareQuestions = [
    "Give me a 5-minute massage, focusing on all my pleasure points.",
    "Blindfold me and tease me for 2 minutes without touching my genitals.",
    "Whisper your dirtiest fantasy in my ear.",
    "Remove one piece of your clothing using only your teeth.",
    "Give me a lap dance.",
    "Write down five things you find irresistible about me and read them aloud.",
    "Let me tie you up (gently!) and explore your body for 5 minutes.",
    "Send me a provocative text message right now.",
    "Give me a passionate 60-second kiss, starting from my neck.",
    "Act out a scene from your favorite romantic movie with a naughty twist.",
    "Let me choose your outfit for our next intimate encounter.",
    "Give me a full-body lick, avoiding my face.",
    "Perform a striptease to your favorite song.",
    "Take a suggestive photo of yourself and show it to me.",
    "Let me tickle you relentlessly for one minute (unless you genuinely can't stand it!).",
    "Go put on the sexiest piece of lingerie/underwear you own.",
    "Whisper something incredibly dirty in my ear that you've never said before.",
    "Give me a back massage using a sensual oil.",
    "Allow me to blindfold you and feed you a sensual food (e.g., chocolate, fruit).",
    "Write \"I love you\" somewhere on my body using your tongue.",
    "Give me a \"toes-to-nose\" kiss.",
    "Let me give you a sensuous bath or shower.",
    "Describe in detail the last time you thought about me sexually when I wasn't around.",
    "Run your hands all over my body, telling me what you love about each part.",
    "Wear only an apron while making me a drink.",
    "Let me pour ice water down your back slowly.",
    "Read aloud a steamy passage from a book.",
    "Let me choose one article of clothing for you to remove right now.",
    "Give me a \"love bite\" somewhere on my body (lightly!).",
    "Dance seductively for me for one song.",
    "Allow me to spoon-feed you something decadent.",
    "Give me a deep, lingering kiss that lasts for 30 seconds without breaking.",
    "Let me draw on your body with a body-safe marker.",
    "Tell me your deepest, darkest secret.",
    "Give me a foot massage with lotion.",
    "Let me whisper dirty talk into your ear for one minute.",
    "Send me a voice note describing what you want to do to me.",
    "Go to another room and send me a video of you doing something provocative.",
    "Blindfold me and guide my hands over your body.",
    "Give me a \"dirty\" compliment that makes me blush.",
    "Allow me to use a feather or light brush to tease you all over.",
    "Give me a full-body hug, pressing yourself against me.",
    "Let me give you a playful spank (with consent!).",
    "Role-play a fantasy scenario I describe for 5 minutes.",
    "Text me something suggestive when we're in the same room.",
    "Let me give you a sensual hair wash.",
    "Give me a passionate kiss while looking into my eyes.",
    "Put on a playlist that gets you in the mood and dance with me.",
    "Let me give you a \"sensory deprivation\" experience (e.g., blindfold, earplugs).",
    "Write a short, naughty poem about me and read it aloud.",
    "Give me a \"butterfly kiss\" all over my face.",
    "Allow me to choose a piece of your clothing to take off with my mouth.",
    "Give me a full-body caress, describing how each touch makes you feel.",
    "Let me tie you up (lightly) and whisper sweet nothings in your ear.",
    "Send me a picture of your favorite intimate part of my body.",
    "Give me a \"deep breath\" kiss, where we share breaths.",
    "Allow me to give you a \"reverse striptease\" (I put clothes back on you).",
    "Give me a \"slow dance\" in our underwear.",
    "Let me give you a sensual back scratch.",
    "Write down five things you want me to do to you tonight.",
    "Give me a \"sugar cube\" kiss (put a sugar cube in your mouth and kiss me).",
    "Allow me to \"paint\" on your body with melted chocolate.",
    "Give me a \"mirror dare\" - do whatever I do in front of a mirror.",
    "Let me give you a \"taste test\" of various edible treats.",
    "Give me a \"chase kiss\" – I run, you chase and kiss me.",
    "Allow me to give you a \"mystery touch\" – touch you and you guess where.",
    "Give me a \"slow motion\" kiss.",
    "Let me draw a heart on your bare skin with my finger.",
    "Give me a \"whisper trail\" – whisper a secret as you trace a line on my skin.",
    "Allow me to choose a song and you must only make eye contact during it.",
    "Give me a \"kiss tattoo\" – kiss a spot and don't move your lips for 10 seconds.",
    "Let me give you a \"hot and cold\" massage using ice and warm towels.",
    "Give me a \"secret handshake\" that involves a sensual touch.",
    "Allow me to blindfold you and guide your hands to my body.",
    "Give me a \"kissing path\" from my neck to my thigh.",
    "Let me give you a \"chocolate trail\" on your body.",
    "Give me a \"dare to tease\" – tease me for one minute without touching.",
    "Allow me to give you a \"breath kiss\" – breathe on my skin to give me chills.",
    "Give me a \"secret touch\" – touch me somewhere unexpected.",
    "Let me give you a \"sensory exploration\" with different textures.",
    "Give me a \"whisper challenge\" – whisper something only I can hear.",
    "Allow me to give you a \"warm breath\" on your sensitive areas.",
    "Give me a \"kissing game\" – try to kiss every part of my face.",
    "Let me give you a \"sound bath\" with sensual music or sounds.",
    "Give me a \"slow burn\" kiss – start light and get more intense.",
    "Allow me to trace my name on your body with my finger.",
    "Give me a \"hypnotic gaze\" for 30 seconds.",
    "Let me give you a \"finger painting\" on your body with lotion.",
    "Give me a \"silent communication\" where we only use body language.",
    "Allow me to give you a \"sensual hum\" on your neck or ear.",
    "Give me a \"mystery scent\" – close your eyes and guess the scent I put on you.",
    "Let me give you a \"slow reveal\" of a provocative part of my body.",
    "Give me a \"whisper wish\" – whisper a wish into my ear.",
    "Allow me to give you a \"warm hand\" massage on your feet.",
    "Give me a \"mirror gaze\" – look into each other's eyes in the mirror.",
    "Let me give you a \"chocolate kiss\" – a kiss after eating chocolate.",
    "Give me a \"secret touch sequence\" – a series of touches only we know.",
    "Allow me to give you a \"gentle bite\" on your earlobe.",
    "Give me a \"cuddle challenge\" – cuddle for 5 minutes without talking.",
    "Let me give you a \"sensual storytelling\" experience.",
    // ... add all 100 dare questions here
];

const MAX_REROLLS = 3;
let player1Rerolls = MAX_REROLLS;
let player2Rerolls = MAX_REROLLS;
let currentPlayer = 1;
let currentCategory = ''; // To remember if it was a truth or dare
let currentQuestion = ''; // To track the current question displayed

const questionTextElem = document.getElementById('questionText');
const currentPlayerElem = document.getElementById('currentPlayer');
const player1RerollsElem = document.getElementById('player1Rerolls');
const player2RerollsElem = document.getElementById('player2Rerolls');
const truthBtn = document.getElementById('truthBtn');
const dareBtn = document.getElementById('dareBtn');
const rerollBtn = document.getElementById('rerollBtn');
const nextPlayerBtn = document.getElementById('nextPlayerBtn');
const resetGameBtn = document.getElementById('resetGameBtn');

function updatePlayerInfo() {
    currentPlayerElem.textContent = `Player ${currentPlayer}`;
    player1RerollsElem.textContent = player1Rerolls;
    player2RerollsElem.textContent = player2Rerolls;
}

function getRandomQuestion(category, excludeQuestion = null) {
    let questionsPool = category === 'truth' ? truthQuestions : dareQuestions;
    let availableQuestions = questionsPool.filter(q => q !== excludeQuestion);

    if (availableQuestions.length === 0) {
        // If all questions used (or only the excluded one is left), reset pool
        console.warn("All questions in category used, resetting pool.");
        availableQuestions = questionsPool;
    }
    const randomIndex = Math.floor(Math.random() * availableQuestions.length);
    return availableQuestions[randomIndex];
}

function displayQuestion(category) {
    currentCategory = category;
    currentQuestion = getRandomQuestion(category, currentQuestion); // Exclude current question on reroll
    questionTextElem.textContent = currentQuestion;

    // Disable Truth/Dare buttons after a selection
    truthBtn.disabled = true;
    dareBtn.disabled = true;
    nextPlayerBtn.style.display = 'inline-block'; // Show Next Player button
}

function handleReroll() {
    if (currentPlayer === 1) {
        if (player1Rerolls > 0) {
            player1Rerolls--;
            displayQuestion(currentCategory); // Get new question for same category
            updatePlayerInfo();
        } else {
            alert("Player 1 has no re-rolls left!");
        }
    } else { // currentPlayer === 2
        if (player2Rerolls > 0) {
            player2Rerolls--;
            displayQuestion(currentCategory); // Get new question for same category
            updatePlayerInfo();
        } else {
            alert("Player 2 has no re-rolls left!");
        }
    }
}

function nextPlayerTurn() {
    currentPlayer = currentPlayer === 1 ? 2 : 1;
    updatePlayerInfo();
    questionTextElem.textContent = `Player ${currentPlayer}, choose Truth or Dare!`;

    // Re-enable Truth/Dare buttons for the new player
    truthBtn.disabled = false;
    dareBtn.disabled = false;
    rerollBtn.disabled = false; // Enable reroll for the new player
    nextPlayerBtn.style.display = 'none'; // Hide Next Player button
    currentCategory = ''; // Reset category for new player's choice
    currentQuestion = ''; // Reset for new player
}

function resetGame() {
    player1Rerolls = MAX_REROLLS;
    player2Rerolls = MAX_REROLLS;
    currentPlayer = 1;
    currentCategory = '';
    currentQuestion = '';
    updatePlayerInfo();
    questionTextElem.textContent = "Click Truth or Dare to start!";
    truthBtn.disabled = false;
    dareBtn.disabled = false;
    rerollBtn.disabled = false;
    nextPlayerBtn.style.display = 'none';
}

// Event Listeners
truthBtn.addEventListener('click', () => displayQuestion('truth'));
dareBtn.addEventListener('click', () => displayQuestion('dare'));
rerollBtn.addEventListener('click', handleReroll);
nextPlayerBtn.addEventListener('click', nextPlayerTurn);
resetGameBtn.addEventListener('click', resetGame);

// Initial setup
updatePlayerInfo();